<span>Connecting to localhost:8080...</span>
<script type="text/javascript" src="lib/osc.min.js"></script>
<script type="text/javascript">
  const delay = 30000
  const host = "localhost"
  const port = 8080
  const ws = new OSC({
    plugin: new OSC.WebsocketClientPlugin({host, port})
  })
  Beat.log("Opening WS at localhost:8080")
  ws.open()
  Beat.log("Opened.")
  Beat.callAndWait("Beat.custom.handleOpen()")
    .then((password) => {
      Beat.log("Received " + password)
      const address = '/connect/' + password
      ws.on(address, (reply) => {
        Beat.call(Beat.custom.handleReply(reply))
      })
      ws.send(new OSC.Message(address, args))
      setTimeout(() => `Timed out after ${delay / 1000} seconds.`, delay)
    }, (error) => {
      Beat.log(e?.message ?? e)
    })
    //Beat.call(Beat.custom.handleError(error))
</script>
